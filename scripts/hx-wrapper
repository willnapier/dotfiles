#!/bin/bash
# Wrapper for Helix to fix terminal dimensions in Zellij panes
# Forces proper TERM and dimensions detection

# Set proper terminal type
export TERM="${TERM:-xterm-256color}"

# Force proper terminal dimensions
if command -v tput >/dev/null 2>&1; then
    export COLUMNS=$(tput cols 2>/dev/null || stty size 2>/dev/null | cut -d' ' -f2 || echo 80)
    export LINES=$(tput lines 2>/dev/null || stty size 2>/dev/null | cut -d' ' -f1 || echo 24)
else
    # Fallback to stty if tput not available
    if command -v stty >/dev/null 2>&1; then
        size=$(stty size 2>/dev/null)
        if [[ -n "$size" ]]; then
            export LINES=$(echo $size | cut -d' ' -f1)
            export COLUMNS=$(echo $size | cut -d' ' -f2)
        else
            export LINES=24
            export COLUMNS=80
        fi
    fi
fi

# Pass all arguments to helix
exec /opt/homebrew/bin/hx "$@"