#!/usr/bin/env nu
# Auto-trigger for project collection
# Runs silently, only shows errors
# Called by file watcher or (future) Helix auto-save hook

# Run collection silently
try {
    ^collect-projects out+err> /dev/null
} catch {
    # Log error but don't interrupt workflow
    let error_log = ([$env.HOME ".local" "share" "collect-projects-errors.log"] | path join)
    let timestamp = (date now | format date "%Y-%m-%d %H:%M:%S")
    $"($timestamp): Collection failed - ($in)\n" | save --append $error_log
}
